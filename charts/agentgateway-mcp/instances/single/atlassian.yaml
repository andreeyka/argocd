# MCP Atlassian Server - Jira/Confluence integration
name: mcp-atlassian
image: ghcr.io/sooperset/mcp-atlassian:latest
# mcp-atlassian требует аргументы командной строки, не поддерживает env vars MCP_TRANSPORT
# Доступные параметры: mcp-atlassian --help
args:
  - "--transport"
  - "streamable-http"
  - "--stateless"     # Для Kubernetes: ephemeral session state
  - "--host"
  - "0.0.0.0"         # Слушать на всех интерфейсах
  - "--port"
  - "8000"
  - "-v"              # Verbose logging
# === Authorization Policy (опционально) ===
# Ограничивает доступ к tools на основе JWT claims
# Документация: https://agentgateway.dev/docs/kubernetes/latest/mcp/tool-access/
# authorization:
#   enabled: true
#   policyName: mcp-atlassian-auth
#   action: Allow
#   matchExpressions:
#     - 'jwt.groups.exists(g, g == "developers")'
