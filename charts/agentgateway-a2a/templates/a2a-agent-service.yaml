{{- if .Values.a2a.agent.enabled }}
{{- $service := .Values.a2a.agent.service | default dict }}
{{- $deployment := .Values.a2a.agent.deployment | default dict }}
apiVersion: v1
kind: Service
metadata:
  name: {{ $service.name | default "a2a-agent" }}
  namespace: {{ $service.namespace | default "agentgateway-system" }}
spec:
  selector:
    app: {{ $deployment.name | default "a2a-agent" }}
  type: ClusterIP
  ports:
    - protocol: TCP
      port: {{ $service.port | default 8000 }}
      targetPort: {{ $service.targetPort | default 8000 }}
      appProtocol: kgateway.dev/a2a
{{- end }}
